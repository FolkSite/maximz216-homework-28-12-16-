# maximz216-homework-28-12-16-
Пользуясь отчасти ранее написанным на занятии кодом, реализовать следующую задачу.  Создание контактной формы.  1.Все данные  храним в файле.  2. Есть страница с формой для добавления комментариев. Комментарии выводятся на той же странице, под формой.  3. Комментарии оставляет только авторизованный пользователь. Т.е. для неавторизованного юзера форма выводиться не должна. Комментарии просматривать можно. И сверху, тогда должна быть кнопка-ссылка на страницу авторизации и регистрации.  4. Для авторизованного юзера кнопка авторизации и регистрации не должна быть видна. Только кнопка логаута.  5. При регистрации, юзер сразу становится авторизованным.  6. Комментарии должны быть стилизованны, например выровнять их лево-право-....  7. Комменты должны прогоняться через "антимат" - т.е. есть набор "запрещённых" слов, которые в комментах должны автоматически заменяться на что-то типа "ЦЕНЗУРА" или на ваше усмотрение.  8. Должна быть админчасть, куда доступ есть только для юзера с админской ролью  9. В админке админ может делать комменты видимыми или скрывать их от вывода.  10. Можно добавлять слова в антимат, и удалять их.  11. При выводе сообщений, также надо вывести время, когда юзер оставил коммент.     Набор подсказок (спойлер :)), кто хочет делать сам - дальше не читайте.  Для хранение данных подойдет индексный массив, где каждым элементом будет ассоциативный массив. Он может выглядеть примерно так:  $messages = [ 0 => [  "name" => "John", "comment" => "Всем привет ЦЕНЗУРА!", "time" => 123322154, "checked" => 0 ], 1 => [  "name" => "Юра", "comment" => "Присоединился)!", "time" => 123322154, "checked" => 1 ],  ];  По структуре видно, что админ в админке при модерировании комментариев - просто ставит галочки в чекбоксах. И отправляет. И тогда файл с комментариями перезаписывается.  Напоминаю, самый простой способ хранения массива в файле - сериализация. Записывать и читать из файла - проще всего - file_get(put)_contents.  При добавлении коммента - его текст сначала прогоняется через функцию-антимат, которая пробегает по тексту, ищет в нем запрещённые слова (которые срипт предварительно прочитает из файла), и заменяет их на другое слово.  Вывод-скрытие кнопок - делаем через вывод html-разметки по условию в блоке php.  Например -   if ($user['role'] == 1){ ?>  &lt;h1>Привет, админ&lt;/h1>  } else { ?>  &lt;h1>Привет, юзер&lt;/h1>  } ?>  Так же, выводим или нет форму - в зависимости авторизован юзер, или нет.  При авторизации - смотрим в файл с юзерами, проверяем наличие юзера и совпадение пароля, и его роль. И тогда всё это бросаем в сессию.  Тогда при добавлении комментария, юзеру не надо писать своё имя - оно должно подхватиться из авторизации, из сессии.  При попытке зайти в админку - например /admin.php - надо проверять роль юзера (а она у вас уже должна быть в сессии) и если она не админская - сразу редирект на главную.  В админке есть два основных функционала - добавление слов в антимат, и модерация комментариев. Модерация - церез чекбокс. Добавление - через форму.  Подсказка по модерации -   foreach ($messages as $id => $message){ echo $message['text']; echo "&lt;input name="check" type="checkbox" />"; echo "&lt;input name="id" type="hidden" />"; }  Если форма отправлена (проверяем POST) - зачитали файл с комментариями в массив messages и тогда пишем  $id = $_POST['id'];  $messages[$id]['checked'] = $POST['check'];  После чего снова сериализовали и записали в файл.  Это как пример.  Итого должно быть три файла - users, messages, forbidden, с ними вы и работаете.  Код нужно максимально выносить в функции.     Всем удачи).
